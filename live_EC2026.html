<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elimination Chamber Live Tracker (EC2026)</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="live.css">
  <style>
    .picks-grid {
      margin-top: 10px;
      border-top: 1px solid #deedf7;
      padding-top: 10px;
      display: grid;
      gap: 8px;
    }

    .picks-grid-header {
      display: grid;
      grid-template-columns: 88px 1fr 84px 70px;
      gap: 10px;
      color: #4b5d70;
      font-size: 0.78rem;
      font-weight: 700;
    }

    .picks-grid-row {
      display: grid;
      grid-template-columns: 88px 1fr 84px 70px;
      gap: 10px;
      align-items: start;
      font-size: 0.86rem;
      color: #24516d;
      border-top: 1px solid #e8f2f8;
      padding-top: 8px;
    }

    .picks-player {
      font-weight: 700;
      color: #22445a;
    }

    .picks-lines {
      display: grid;
      gap: 3px;
      color: #15202b;
    }

    .picks-line.winning-pick {
      color: #24516d;
      font-weight: 700;
    }

    .picks-line.losing-pick {
      color: #5b6d7f;
    }

    .picks-wager {
      text-align: right;
      color: #445066;
      font-variant-numeric: tabular-nums;
    }

    .picks-status {
      font-weight: 700;
      text-align: center;
    }

    .picks-status.win {
      color: #24516d;
    }

    .picks-status.loss {
      color: #5b6d7f;
    }

    .picks-status.pending {
      color: #456178;
    }

    .picks-net {
      margin-top: 2px;
      font-size: 0.72rem;
      font-weight: 600;
      color: #4b5d70;
      text-align: center;
      font-variant-numeric: tabular-nums;
    }

    .player-card.over-limit {
      border-color: rgba(122, 74, 0, 0.28);
      background: rgba(252, 248, 241, 0.85);
    }

    .player-warning {
      color: #7a4a00;
      font-size: 0.72rem;
      font-weight: 700;
      letter-spacing: 0.01em;
    }

    .match-status.issue {
      color: #7a4a00;
    }

    .match-issue {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #e4d2b7;
      background: #fcf8f1;
      color: #7a4a00;
      font-size: 0.84rem;
      line-height: 1.35;
    }

    @media (max-width: 700px) {
      .picks-grid-header,
      .picks-grid-row {
        grid-template-columns: 72px 1fr 70px 64px;
        gap: 8px;
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <main class="container">
    <header class="event-header" data-event-name="Elimination Chamber">
      <img class="event-logo" src="assets/logos/EC2026.png" alt="Elimination Chamber logo">
      <div class="event-time"><strong>Start Time:</strong> 7:00pm EST</div>
      <div class="event-meta">
        <div><strong>Date:</strong> Saturday, February 28th, 2026</div>
        <div><strong>Country:</strong> USA</div>
        <div><strong>Location:</strong> Chicago, IL</div>
        <div><strong>Venue:</strong> United Center</div>
      </div>
      <div class="live-status-line"><strong>Status:</strong> Pending | <strong>Matches completed:</strong> 0 / 4</div>
    </header>

    <nav class="page-nav" aria-label="Page navigation">
      <a class="copy-btn btn-secondary" href="event_EC2026.html">Make Picks</a>
      <a class="copy-btn btn-primary" href="live_EC2026.html">Live Tracker</a>
    </nav>

    
        <section class="summary-panel leaderboard-panel">
          <h3 class="summary-title">Leaderboard</h3>
          <div id="leaderboard-scoreboard" class="scoreboard" role="list" aria-label="Leaderboard scoreboard"></div>
        </section>
        

    <section class="match-controls" aria-label="Match controls">
      <button id="expand-all" class="copy-btn btn-secondary" type="button">Expand all</button>
      <button id="collapse-all" class="copy-btn btn-secondary" type="button">Collapse all</button>
    </section>

    <section class="matches">
      
            <section class="match-card">
                <button class="match-toggle" type="button" aria-expanded="true">
                    <div class="match-toggle-meta">
                        <h2>Women&#x27;s Intercontinental Championship</h2>
                        <span class="match-status pending">Status: Pending</span>
                    </div>
                    <span class="toggle-icon" aria-hidden="true">▾</span>
                </button>
                <div class="match-body">
                    
                <div class=" wrestler champion">
                    <div class="wrestler-main">
                        <span class="name">Becky Lynch<img class="belt-icon" src="assets/belts/womens_ic.png" alt="Women&#x27;s Intercontinental Championship belt"></span>
                    </div>
                    <div class="odds">Odds: +200</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">AJ Lee</span>
                    </div>
                    <div class="odds">Odds: -300</div>
                </div>
                
                </div>
            </section>
            
            <section class="match-card">
                <button class="match-toggle" type="button" aria-expanded="true">
                    <div class="match-toggle-meta">
                        <h2>World Heavyweight Championship</h2>
                        <span class="match-status pending">Status: Pending</span>
                    </div>
                    <span class="toggle-icon" aria-hidden="true">▾</span>
                </button>
                <div class="match-body">
                    
                <div class=" wrestler champion">
                    <div class="wrestler-main">
                        <span class="name">CM Punk<img class="belt-icon" src="assets/belts/world_heavyweight.png" alt="World Heavyweight Championship belt"></span>
                    </div>
                    <div class="odds">Odds: -5000</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Finn Balor</span>
                    </div>
                    <div class="odds">Odds: +1200</div>
                </div>
                
                </div>
            </section>
            
            <section class="match-card">
                <button class="match-toggle" type="button" aria-expanded="true">
                    <div class="match-toggle-meta">
                        <h2>Men&#x27;s Elimination Chamber</h2>
                        <span class="match-status pending">Status: Pending</span>
                    </div>
                    <span class="toggle-icon" aria-hidden="true">▾</span>
                </button>
                <div class="match-body">
                    
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Cody Rhodes</span>
                    </div>
                    <div class="odds">Odds: -200</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">LA Knight</span>
                    </div>
                    <div class="odds">Odds: +300</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Randy Orton</span>
                    </div>
                    <div class="odds">Odds: +200</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Trick Williams</span>
                    </div>
                    <div class="odds">Odds: +800</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Logan Paul</span>
                    </div>
                    <div class="odds">Odds: +900</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Je’Von Evans</span>
                    </div>
                    <div class="odds">Odds: +800</div>
                </div>
                
                </div>
            </section>
            
            <section class="match-card">
                <button class="match-toggle" type="button" aria-expanded="true">
                    <div class="match-toggle-meta">
                        <h2>Women&#x27;s Elimination Chamber</h2>
                        <span class="match-status pending">Status: Pending</span>
                    </div>
                    <span class="toggle-icon" aria-hidden="true">▾</span>
                </button>
                <div class="match-body">
                    
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Alexa Bliss</span>
                    </div>
                    <div class="odds">Odds: +400</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Tiffany Stratton</span>
                    </div>
                    <div class="odds">Odds: +150</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Rhea Ripley</span>
                    </div>
                    <div class="odds">Odds: -300</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Kiana James</span>
                    </div>
                    <div class="odds">Odds: +1200</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Asuka</span>
                    </div>
                    <div class="odds">Odds: +400</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Raquel Rodriguez</span>
                    </div>
                    <div class="odds">Odds: +125</div>
                </div>
                
                </div>
            </section>
            
    </section>

    <footer class="site-footer">
      Last updated: February 24, 2026 23:08 UTC
    </footer>
  </main>
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const PLAYERS = ["Mert", "Fert", "Gert"];
    const EVENT_ROWS = [
      { match: "Men's Elimination Chamber", wrestler: "Cody Rhodes", odds: -200, result: "", totalPlayerPoints: 60, MertWager: 15, FertWager: 0, GertWager: 15 },
      { match: "Men's Elimination Chamber", wrestler: "Randy Orton", odds: 200, result: "", totalPlayerPoints: 60, MertWager: 5, FertWager: 0, GertWager: 5 },
      { match: "Men's Elimination Chamber", wrestler: "LA Knight", odds: 300, result: "", totalPlayerPoints: 60, MertWager: 5, FertWager: 10, GertWager: 0 },
      { match: "Men's Elimination Chamber", wrestler: "Trick Williams", odds: 800, result: "", totalPlayerPoints: 60, MertWager: 0, FertWager: 5, GertWager: 0 },
      { match: "Men's Elimination Chamber", wrestler: "Je'Von Evans", odds: 800, result: "", totalPlayerPoints: 60, MertWager: 0, FertWager: 0, GertWager: 0 },
      { match: "Men's Elimination Chamber", wrestler: "Logan Paul", odds: 900, result: "", totalPlayerPoints: 60, MertWager: 0, FertWager: 0, GertWager: 0 },
      { match: "Women's Elimination Chamber", wrestler: "Rhea Ripley", odds: -300, result: "W", totalPlayerPoints: 60, MertWager: 10, FertWager: 15, GertWager: 0 },
      { match: "Women's Elimination Chamber", wrestler: "Raquel Rodriguez", odds: 125, result: "L", totalPlayerPoints: 60, MertWager: 5, FertWager: 0, GertWager: 0 },
      { match: "Women's Elimination Chamber", wrestler: "Tiffany Stratton", odds: 150, result: "L", totalPlayerPoints: 60, MertWager: 5, FertWager: 10, GertWager: 15 },
      { match: "Women's Elimination Chamber", wrestler: "Alexa Bliss", odds: 400, result: "L", totalPlayerPoints: 60, MertWager: 0, FertWager: 0, GertWager: 0 },
      { match: "Women's Elimination Chamber", wrestler: "Asuka", odds: 400, result: "L", totalPlayerPoints: 60, MertWager: 0, FertWager: 0, GertWager: 0 },
      { match: "Women's Elimination Chamber", wrestler: "Kiana James", odds: 1200, result: "L", totalPlayerPoints: 60, MertWager: 0, FertWager: 0, GertWager: 0 },
      { match: "Women's Intercontinental Championship", wrestler: "AJ Lee", odds: -300, result: "", totalPlayerPoints: 60, MertWager: 0, FertWager: 10, GertWager: 0 },
      { match: "Women's Intercontinental Championship", wrestler: "Becky Lynch", odds: 200, result: "", totalPlayerPoints: 60, MertWager: 5, FertWager: 0, GertWager: 20 },
      { match: "World Heavyweight Championship", wrestler: "CM Punk", odds: -5000, result: "", totalPlayerPoints: 60, MertWager: 10, FertWager: 10, GertWager: 5 },
      { match: "World Heavyweight Championship", wrestler: "Finn Balor", odds: 1200, result: "", totalPlayerPoints: 60, MertWager: 0, FertWager: 0, GertWager: 0 }
    ];

    const cards = Array.from(document.querySelectorAll(".match-card"));
    const leaderboardScoreboard = document.getElementById("leaderboard-scoreboard");
    const statusLine = document.querySelector(".live-status-line");

    function toWholeNumber(value) {
      const num = Number(value);
      if (!Number.isFinite(num)) return 0;
      return Math.round(num);
    }

    function normalizeName(value) {
      return String(value || "").replace(/[’`]/g, "'").trim().toLowerCase();
    }

    function profitFromOdds(wager, odds) {
      const wagerNum = Number(wager);
      const oddsNum = Number(odds);
      if (!Number.isFinite(wagerNum) || wagerNum <= 0 || !Number.isFinite(oddsNum) || oddsNum === 0) return 0;
      if (oddsNum < 0) return wagerNum * (100 / Math.abs(oddsNum));
      return wagerNum * (oddsNum / 100);
    }

    function renderLeaderboard(players) {
      if (!leaderboardScoreboard) return;
      if (!players.length) {
        leaderboardScoreboard.innerHTML = "";
        return;
      }

      const maxScore = players.reduce(function (max, p) { return Math.max(max, p.score); }, 0);
      leaderboardScoreboard.innerHTML = players.map(function (p) {
        const isLeader = p.score === maxScore;
        return (
          '<article class="player-card' + (isLeader ? ' leader' : '') + (p.overLimit ? ' over-limit' : '') + '" role="listitem" aria-label="' + p.player + ' leaderboard card">' +
            '<div class="player-card-head">' +
              '<h4 class="player-name">' + p.player + '</h4>' +
              (isLeader ? '<span class="leader-badge">Leader</span>' : '') +
            '</div>' +
            '<div class="player-score">' + p.score + '</div>' +
            '<dl class="player-stats">' +
              '<div class="player-stat"><dt>W-L</dt><dd>' + p.wins + '-' + p.losses + '</dd></div>' +
              '<div class="player-stat"><dt>Total Wagered</dt><dd>' + p.totalWagered + '</dd></div>' +
              '<div class="player-stat"><dt>Pending</dt><dd>' + p.pending + '</dd></div>' +
              '<div class="player-stat"><dt>Max Possible Points</dt><dd>' + p.maxPossiblePoints + '</dd></div>' +
            '</dl>' +
            (p.overLimit ? '<div class="player-warning">Over event point limit</div>' : '') +
          '</article>'
        );
      }).join("");
    }

    function getCardByMatchName() {
      const map = {};
      cards.forEach(function (card) {
        const titleEl = card.querySelector(".match-toggle h2");
        if (!titleEl) return;
        const matchName = titleEl.textContent.trim();
        map[matchName] = card;
      });
      return map;
    }

    function computeMatchStatus(rows) {
      const normalized = rows.map(function (row) { return String(row.result || "").trim().toUpperCase(); });
      const winners = rows.filter(function (row) { return String(row.result || "").trim().toUpperCase() === "W"; });
      const hasAnyResult = normalized.some(function (value) { return value === "W" || value === "L"; });
      const allBlank = normalized.every(function (value) { return value === ""; });
      const allNonWAreL = rows.every(function (row) {
        const value = String(row.result || "").trim().toUpperCase();
        return value === "W" || value === "L";
      });

      if (winners.length === 1 && allNonWAreL) {
        return { status: "final", winner: winners[0].wrestler, issue: "" };
      }
      if (allBlank) {
        return { status: "pending", winner: "", issue: "" };
      }
      if (winners.length > 1) {
        return { status: "issue", winner: "", issue: "Data issue: multiple winners marked in this match." };
      }
      if (hasAnyResult) {
        return { status: "issue", winner: "", issue: "Data issue: finalized matches must have exactly one W and all others L." };
      }
      return { status: "pending", winner: "", issue: "" };
    }

    function buildGroups() {
      const groups = {};
      EVENT_ROWS.forEach(function (row) {
        if (!groups[row.match]) groups[row.match] = [];
        groups[row.match].push(row);
      });
      return groups;
    }

    function buildScoreboard(groups) {
      const eventTotalPointsRaw = EVENT_ROWS.find(function (row) {
        return Number.isFinite(Number(row.totalPlayerPoints));
      });
      const eventTotalPoints = eventTotalPointsRaw ? Number(eventTotalPointsRaw.totalPlayerPoints) : 0;
      const playerTotals = {};
      PLAYERS.forEach(function (player) {
        playerTotals[player] = {
          player: player,
          scoreInternal: 0,
          wins: 0,
          losses: 0,
          pending: 0,
          maxPossiblePoints: 0,
          totalWagered: 0
        };
      });

      Object.keys(groups).forEach(function (matchName) {
        const rows = groups[matchName];
        const matchState = computeMatchStatus(rows);

        PLAYERS.forEach(function (player) {
          const wagerField = player + "Wager";
          const selections = rows
            .map(function (row) {
              return {
                wrestler: row.wrestler,
                odds: Number(row.odds),
                result: String(row.result || "").trim().toUpperCase(),
                wager: Number(row[wagerField] || 0)
              };
            })
            .filter(function (entry) { return Number.isFinite(entry.wager) && entry.wager > 0; });
          const participated = selections.length > 0;
          selections.forEach(function (entry) {
            playerTotals[player].totalWagered += entry.wager;
          });

          if (matchState.status === "final") {
            if (participated) {
              const pickedWinner = selections.some(function (entry) {
                return normalizeName(entry.wrestler) === normalizeName(matchState.winner);
              });
              if (pickedWinner) {
                playerTotals[player].wins += 1;
              } else {
                playerTotals[player].losses += 1;
              }
            }

            selections.forEach(function (entry) {
              if (entry.result === "W" || normalizeName(entry.wrestler) === normalizeName(matchState.winner)) {
                playerTotals[player].scoreInternal += entry.wager + profitFromOdds(entry.wager, entry.odds);
              }
            });
          } else {
            selections.forEach(function (entry) {
              playerTotals[player].pending += entry.wager;
              playerTotals[player].maxPossiblePoints += entry.wager + profitFromOdds(entry.wager, entry.odds);
            });
          }
        });
      });

      return PLAYERS.map(function (player) {
        const totals = playerTotals[player];
        return {
          player: totals.player,
          score: Math.max(0, toWholeNumber(totals.scoreInternal)),
          wins: toWholeNumber(totals.wins),
          losses: toWholeNumber(totals.losses),
          pending: toWholeNumber(totals.pending),
          maxPossiblePoints: toWholeNumber(totals.maxPossiblePoints),
          totalWagered: toWholeNumber(totals.totalWagered),
          overLimit: totals.totalWagered > eventTotalPoints
        };
      });
    }

    function updatePageStatus(groups) {
      if (!statusLine) return;
      const names = Object.keys(groups);
      const totalMatches = names.length;
      let finalCount = 0;
      let pendingCount = 0;
      names.forEach(function (name) {
        const matchState = computeMatchStatus(groups[name]);
        if (matchState.status === "final") {
          finalCount += 1;
        } else {
          pendingCount += 1;
        }
      });

      let overall = "Pending";
      if (finalCount === 0) {
        overall = "Pending";
      } else if (pendingCount === 0) {
        overall = "Final";
      } else {
        overall = "Live";
      }
      statusLine.innerHTML = "<strong>Status:</strong> " + overall + " | <strong>Matches completed:</strong> " + finalCount + " / " + totalMatches;
    }

    function updateMatchCards(groups) {
      const cardByMatch = getCardByMatchName();
      Object.keys(groups).forEach(function (matchName) {
        const card = cardByMatch[matchName];
        if (!card) return;
        const rows = groups[matchName];
        const state = computeMatchStatus(rows);
        const matchStatusEl = card.querySelector(".match-status");
        if (matchStatusEl) {
          matchStatusEl.classList.remove("pending", "final", "invalid", "issue");
          if (state.status === "final") {
            matchStatusEl.textContent = "Status: Final";
            matchStatusEl.classList.add("final");
          } else if (state.status === "issue") {
            matchStatusEl.textContent = "Status: Data issue";
            matchStatusEl.classList.add("issue");
          } else {
            matchStatusEl.textContent = "Status: Pending";
            matchStatusEl.classList.add("pending");
          }
        }

        const wrestlerRows = Array.from(card.querySelectorAll(".wrestler"));
        wrestlerRows.forEach(function (wrestlerRow) {
          wrestlerRow.classList.remove("result-lost");
          const resultPill = wrestlerRow.querySelector(".result-pill");
          if (resultPill) resultPill.remove();
          const nameEl = wrestlerRow.querySelector(".name");
          if (!nameEl) return;
          const wrestlerName = nameEl.childNodes[0] ? nameEl.childNodes[0].nodeValue.trim() : nameEl.textContent.trim();
          if (state.status === "final" && normalizeName(wrestlerName) === normalizeName(state.winner)) {
            const winnerPill = document.createElement("span");
            winnerPill.className = "result-pill";
            winnerPill.textContent = "Winner";
            nameEl.appendChild(winnerPill);
          }
        });

        const oldIssue = card.querySelector(".match-issue");
        if (oldIssue) oldIssue.remove();
        if (state.status === "issue") {
          const issueEl = document.createElement("div");
          issueEl.className = "match-issue";
          issueEl.textContent = state.issue;
          const body = card.querySelector(".match-body");
          if (body) body.appendChild(issueEl);
        }
      });
    }

    function renderPicks(groups) {
      const cardByMatch = getCardByMatchName();
      Object.keys(groups).forEach(function (matchName) {
        const card = cardByMatch[matchName];
        if (!card) return;
        const rows = groups[matchName];
        const state = computeMatchStatus(rows);
        const body = card.querySelector(".match-body");
        if (!body) return;

        const existing = body.querySelector(".picks-grid");
        if (existing) existing.remove();

        const picksGrid = document.createElement("div");
        picksGrid.className = "picks-grid";
        picksGrid.innerHTML =
          '<div class="picks-grid-header">' +
            '<span>Player</span><span>Pick</span><span class="picks-wager">Wager</span><span class="picks-status">Status</span>' +
          '</div>';

        PLAYERS.forEach(function (player) {
          const wagerField = player + "Wager";
          const selections = rows
            .map(function (row) {
              return {
                wrestler: row.wrestler,
                odds: Number(row.odds),
                result: String(row.result || "").trim().toUpperCase(),
                wager: Number(row[wagerField] || 0)
              };
            })
            .filter(function (entry) { return Number.isFinite(entry.wager) && entry.wager > 0; });
          const participated = selections.length > 0;
          const pickedWinner = selections.some(function (entry) {
            return normalizeName(entry.wrestler) === normalizeName(state.winner);
          });

          let statusText = "Pending";
          let statusClass = "pending";
          if (state.status === "final") {
            if (pickedWinner) {
              statusText = "Win";
              statusClass = "win";
            } else if (participated) {
              statusText = "Loss";
              statusClass = "loss";
            } else {
              statusText = "—";
              statusClass = "";
            }
          } else if (state.status === "issue") {
            statusText = "Issue";
            statusClass = "loss";
          }

          let matchNet = 0;
          if (state.status === "final") {
            selections.forEach(function (entry) {
              if (entry.result === "W" || normalizeName(entry.wrestler) === normalizeName(state.winner)) {
                matchNet += entry.wager + profitFromOdds(entry.wager, entry.odds);
              }
            });
          }
          const matchNetWhole = toWholeNumber(matchNet);
          const matchNetDisplay = matchNetWhole > 0 ? "+" + matchNetWhole : String(matchNetWhole);

          const picksLines = selections.length
            ? selections.map(function (entry) {
                let lineClass = "";
                if (state.status === "final") {
                  if (entry.result === "W" || normalizeName(entry.wrestler) === normalizeName(state.winner)) {
                    lineClass = " winning-pick";
                  } else {
                    lineClass = " losing-pick";
                  }
                }
                return '<div class="picks-line' + lineClass + '">' + entry.wrestler + "</div>";
              }).join("")
            : '<div class="picks-line">—</div>';

          const wagerLines = selections.length
            ? selections.map(function (entry) {
                return '<div class="picks-line">' + toWholeNumber(entry.wager) + "</div>";
              }).join("")
            : '<div class="picks-line">—</div>';

          const row = document.createElement("div");
          row.className = "picks-grid-row";
          row.innerHTML =
            '<div class="picks-player">' + player + "</div>" +
            '<div class="picks-lines">' + picksLines + "</div>" +
            '<div class="picks-lines picks-wager">' + wagerLines + "</div>" +
            '<div><div class="picks-status ' + statusClass + '">' + statusText + "</div><div class=\"picks-net\">Net: " + matchNetDisplay + "</div></div>";
          picksGrid.appendChild(row);
        });

        body.appendChild(picksGrid);
      });
    }

    function setExpanded(card, expanded) {
      const toggle = card.querySelector(".match-toggle");
      const body = card.querySelector(".match-body");
      if (!toggle || !body) return;
      toggle.setAttribute("aria-expanded", expanded ? "true" : "false");
      body.hidden = !expanded;
    }
    cards.forEach(function (card) {
      const toggle = card.querySelector(".match-toggle");
      setExpanded(card, true);
      if (toggle) {
        toggle.addEventListener("click", function () {
          const expanded = toggle.getAttribute("aria-expanded") === "true";
          setExpanded(card, !expanded);
        });
      }
    });
    const expandAll = document.getElementById("expand-all");
    const collapseAll = document.getElementById("collapse-all");
    if (expandAll) expandAll.addEventListener("click", function () { cards.forEach(function (c) { setExpanded(c, true); }); });
    if (collapseAll) collapseAll.addEventListener("click", function () { cards.forEach(function (c) { setExpanded(c, false); }); });

    const groups = buildGroups();
    const hasAnyWager = EVENT_ROWS.some(function (row) {
      return PLAYERS.some(function (player) {
        return Number(row[player + "Wager"] || 0) > 0;
      });
    });
    renderLeaderboard(hasAnyWager ? buildScoreboard(groups) : []);
    updatePageStatus(groups);
    updateMatchCards(groups);
    renderPicks(groups);
  });
  </script>
</body>
</html>
