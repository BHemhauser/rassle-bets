<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elimination Chamber Live Tracker (EC2026)</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="live.css">
</head>
<body>
  <main class="container">
    <header class="event-header" data-event-name="Elimination Chamber">
      <img class="event-logo" src="assets/logos/EC2026.png" alt="Elimination Chamber logo">
      <div class="event-time"><strong>Start Time:</strong> 7:00pm EST</div>
      <div class="event-meta">
        <div><strong>Date:</strong> Saturday, February 28th, 2026</div>
        <div><strong>Country:</strong> USA</div>
        <div><strong>Location:</strong> Chicago, IL</div>
        <div><strong>Venue:</strong> United Center</div>
      </div>
      <div class="live-status-line"><strong>Status:</strong> Pending | <strong>Matches completed:</strong> 0 / 4</div>
    </header>

    <nav class="page-nav" aria-label="Page navigation">
      <a class="copy-btn btn-secondary" href="event_EC2026.html">Make Picks</a>
      <a class="copy-btn btn-primary" href="live_EC2026.html">Live Tracker</a>
    </nav>

    
        <section class="summary-panel leaderboard-panel">
          <h3 class="summary-title">Leaderboard</h3>
          <div id="leaderboard-empty" class="summary-row">No picks submitted yet.</div>
          <div id="leaderboard-scoreboard" class="scoreboard" role="list" aria-label="Leaderboard scoreboard" hidden></div>
        </section>
        

    <section class="match-controls" aria-label="Match controls">
      <button id="expand-all" class="copy-btn btn-secondary" type="button">Expand all</button>
      <button id="collapse-all" class="copy-btn btn-secondary" type="button">Collapse all</button>
    </section>

    <section class="matches">
      
            <section class="match-card">
                <button class="match-toggle" type="button" aria-expanded="true">
                    <div class="match-toggle-meta">
                        <h2>Women&#x27;s Intercontinental Championship</h2>
                        <span class="match-status pending">Status: Pending</span>
                    </div>
                    <span class="toggle-icon" aria-hidden="true">▾</span>
                </button>
                <div class="match-body">
                    
                <div class=" wrestler champion">
                    <div class="wrestler-main">
                        <span class="name">Becky Lynch<img class="belt-icon" src="assets/belts/womens_ic.png" alt="Women&#x27;s Intercontinental Championship belt"></span>
                    </div>
                    <div class="odds">Odds: +200</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">AJ Lee</span>
                    </div>
                    <div class="odds">Odds: -300</div>
                </div>
                
                </div>
            </section>
            
            <section class="match-card">
                <button class="match-toggle" type="button" aria-expanded="true">
                    <div class="match-toggle-meta">
                        <h2>World Heavyweight Championship</h2>
                        <span class="match-status pending">Status: Pending</span>
                    </div>
                    <span class="toggle-icon" aria-hidden="true">▾</span>
                </button>
                <div class="match-body">
                    
                <div class=" wrestler champion">
                    <div class="wrestler-main">
                        <span class="name">CM Punk<img class="belt-icon" src="assets/belts/world_heavyweight.png" alt="World Heavyweight Championship belt"></span>
                    </div>
                    <div class="odds">Odds: -5000</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Finn Balor</span>
                    </div>
                    <div class="odds">Odds: +1200</div>
                </div>
                
                </div>
            </section>
            
            <section class="match-card">
                <button class="match-toggle" type="button" aria-expanded="true">
                    <div class="match-toggle-meta">
                        <h2>Men&#x27;s Elimination Chamber</h2>
                        <span class="match-status pending">Status: Pending</span>
                    </div>
                    <span class="toggle-icon" aria-hidden="true">▾</span>
                </button>
                <div class="match-body">
                    
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Cody Rhodes</span>
                    </div>
                    <div class="odds">Odds: -200</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">LA Knight</span>
                    </div>
                    <div class="odds">Odds: +300</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Randy Orton</span>
                    </div>
                    <div class="odds">Odds: +200</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Trick Williams</span>
                    </div>
                    <div class="odds">Odds: +800</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Jey Uso</span>
                    </div>
                    <div class="odds">Odds: +900</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Je’Von Evans</span>
                    </div>
                    <div class="odds">Odds: +800</div>
                </div>
                
                </div>
            </section>
            
            <section class="match-card">
                <button class="match-toggle" type="button" aria-expanded="true">
                    <div class="match-toggle-meta">
                        <h2>Women&#x27;s Elimination Chamber</h2>
                        <span class="match-status pending">Status: Pending</span>
                    </div>
                    <span class="toggle-icon" aria-hidden="true">▾</span>
                </button>
                <div class="match-body">
                    
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Alexa Bliss</span>
                    </div>
                    <div class="odds">Odds: +400</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Tiffany Stratton</span>
                    </div>
                    <div class="odds">Odds: +150</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Rhea Ripley</span>
                    </div>
                    <div class="odds">Odds: -300</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Kiana James</span>
                    </div>
                    <div class="odds">Odds: +1200</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Asuka</span>
                    </div>
                    <div class="odds">Odds: +400</div>
                </div>
                
                <div class=" wrestler">
                    <div class="wrestler-main">
                        <span class="name">Raquel Rodriguez</span>
                    </div>
                    <div class="odds">Odds: +125</div>
                </div>
                
                </div>
            </section>
            
    </section>

    <footer class="site-footer">
      Last updated: February 24, 2026 23:08 UTC
    </footer>
  </main>
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const cards = Array.from(document.querySelectorAll(".match-card"));
    const leaderboardEmpty = document.getElementById("leaderboard-empty");
    const leaderboardScoreboard = document.getElementById("leaderboard-scoreboard");

    function toWholeNumber(value) {
      const num = Number(value);
      if (!Number.isFinite(num)) return 0;
      return Math.round(num);
    }

    function parseCsvRows(text) {
      const lines = text.split(/\r?\n/).map(function (line) { return line.trim(); }).filter(Boolean);
      if (!lines.length) return [];
      const headers = lines[0].split(",").map(function (h) { return h.trim(); });
      const rows = [];
      for (let i = 1; i < lines.length; i += 1) {
        const cols = lines[i].split(",").map(function (c) { return c.trim(); });
        const row = {};
        headers.forEach(function (key, idx) {
          row[key] = cols[idx] || "";
        });
        rows.push(row);
      }
      return rows;
    }

    function normalizePlayer(row) {
      const player = (row.Player || "").trim();
      if (!player) return null;
      const scoreRaw = row.Score !== undefined ? row.Score : row.Net;
      const score = Math.max(0, toWholeNumber(scoreRaw));
      const wins = Math.max(0, toWholeNumber(row.Wins));
      const losses = Math.max(0, toWholeNumber(row.Losses));
      const pending = Math.max(0, toWholeNumber(row.PendingWager !== undefined ? row.PendingWager : row.Pending));
      const maxPossiblePoints = Math.max(0, toWholeNumber(row.MaxPossiblePoints));
      return {
        player: player,
        score: score,
        wins: wins,
        losses: losses,
        pending: pending,
        maxPossiblePoints: maxPossiblePoints
      };
    }

    function renderLeaderboard(players) {
      if (!leaderboardEmpty || !leaderboardScoreboard) return;
      if (!players.length) {
        leaderboardScoreboard.hidden = true;
        leaderboardScoreboard.innerHTML = "";
        leaderboardEmpty.hidden = false;
        return;
      }

      const maxScore = players.reduce(function (max, p) { return Math.max(max, p.score); }, 0);
      leaderboardScoreboard.innerHTML = players.map(function (p) {
        const isLeader = p.score === maxScore;
        return (
          '<article class="player-card' + (isLeader ? ' leader' : '') + '" role="listitem" aria-label="' + p.player + ' leaderboard card">' +
            '<div class="player-card-head">' +
              '<h4 class="player-name">' + p.player + '</h4>' +
              (isLeader ? '<span class="leader-badge">Leader</span>' : '') +
            '</div>' +
            '<div class="player-score">' + p.score + '</div>' +
            '<dl class="player-stats">' +
              '<div class="player-stat"><dt>W-L</dt><dd>' + p.wins + '-' + p.losses + '</dd></div>' +
              '<div class="player-stat"><dt>Pending</dt><dd>' + p.pending + '</dd></div>' +
              '<div class="player-stat"><dt>Max Possible Points</dt><dd>' + p.maxPossiblePoints + '</dd></div>' +
            '</dl>' +
          '</article>'
        );
      }).join("");
      leaderboardEmpty.hidden = true;
      leaderboardScoreboard.hidden = false;
    }

    function loadLeaderboard() {
      const leaderboardPaths = [
        "EC2026_leaderboard.csv",
        "data/EC2026_leaderboard.csv"
      ];

      function tryPath(index) {
        if (index >= leaderboardPaths.length) {
          renderLeaderboard([]);
          return;
        }
        fetch(leaderboardPaths[index], { cache: "no-store" })
          .then(function (response) {
            if (!response.ok) throw new Error("Not found");
            return response.text();
          })
          .then(function (text) {
            const rows = parseCsvRows(text);
            const players = rows.map(normalizePlayer).filter(Boolean);
            renderLeaderboard(players);
          })
          .catch(function () {
            tryPath(index + 1);
          });
      }

      tryPath(0);
    }

    function setExpanded(card, expanded) {
      const toggle = card.querySelector(".match-toggle");
      const body = card.querySelector(".match-body");
      if (!toggle || !body) return;
      toggle.setAttribute("aria-expanded", expanded ? "true" : "false");
      body.hidden = !expanded;
    }
    cards.forEach(function (card) {
      const toggle = card.querySelector(".match-toggle");
      setExpanded(card, true);
      if (toggle) {
        toggle.addEventListener("click", function () {
          const expanded = toggle.getAttribute("aria-expanded") === "true";
          setExpanded(card, !expanded);
        });
      }
    });
    const expandAll = document.getElementById("expand-all");
    const collapseAll = document.getElementById("collapse-all");
    if (expandAll) expandAll.addEventListener("click", function () { cards.forEach(function (c) { setExpanded(c, true); }); });
    if (collapseAll) collapseAll.addEventListener("click", function () { cards.forEach(function (c) { setExpanded(c, false); }); });
    loadLeaderboard();
  });
  </script>
</body>
</html>
